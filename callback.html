<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Callback Page - GitHub Authentication</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        // Initialize Mermaid for flowchart
        mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <!-- Description and Diagram Section -->
    <h1>Welcome Back!</h1>
    <p>You have successfully signed in with GitHub.</p>

    <!-- Diagram -->
    <div class="mermaid">
        graph TD;
          Start[Visitor Views Page] --> SignIn[Sign In with GitHub];
          SignIn --> FormSubmit[Submit Form];
          FormSubmit --> GitHubMachine[GitHub Machine Processes Data];
          GitHubMachine --> End[Process Complete];
    </div>

    <!-- Form Section -->
    <h2>Submit Data Form</h2>
    <p>Fill out this form to submit data for processing. This form uses Formspree to capture submissions.</p>

    <form action="https://formspree.io/YOUR_FORM_ID" method="POST"> <!-- Replace with your Formspree ID -->
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="_replyto" required>

        <label for="message">Message:</label>
        <textarea id="message" name="message" required></textarea>

        <button type="submit">Submit</button>
    </form>

    <p>Once submitted, GitHub Actions will process this data.</p>

    <script>
        // Handle GitHub redirect with code in URL
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
        if (code) {
            console.log("OAuth code received:", code);
            // Here you would exchange the code for a token on your server
            // Then you can display the token or save it for future API calls
        }
    </script>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 GitHub Pages Project</p>
    </footer>
</body>
</html>
